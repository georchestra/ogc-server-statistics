Readme
------

This read me file povide detail to configure and build this module.


Development environment
-----------------------
- Apache Maven 2.2.1 (r801777; 2009-08-06 21:16:01+0200)
- Java version: 1.6.0_26
- Default locale: en_US, platform encoding: UTF-8
- OS name: "linux" version: "2.6.38-12-generic" arch: "amd64" Family: "unix"
- Eclipse Java Indigo

Compiling 
---------
The junit test cases require a postgres database.
You can omit the test case the first time.

$ cd [project-dir]/prototype/ogcservstatistics/
$ mvn install -Dmaven.test.skip

To generate an eclipse project execute the following command:

$ mvn eclipse:eclipse -Dmaven.test.skip

Open the Eclipse (Indigo) and import the project from

[project-dir]/ogc-logging-statistics/prototype/ogcservstatistics

Createing the Logging Table
---------------------------
This module requires a logging table called "ogc_services_log" in a postgres database.
 
You will find the detail about the data structure in the file:

[project-dir]/prototype/database/ogc-statistics-table.html

In order to populate the ogc_services_log table with some data test execute the script:

acceptance-test/populate-access-ogc-services-table.sql 


Configure log4j.properties
--------------------------

The test cases are using the appender configuration present in the 

[project-dir]/prototype/ogcservstatistics
/src/test/resources/com/camptocamp/ogcservstatistics/log4j.properties

You should adjust the key values taking into account you postgres configuration.

log4j.appender.OGCSERVICES.jdbcURL=jdbc:postgresql://[host]:[port]/[database]
log4j.appender.OGCSERVICES.databaseUser=[user]
log4j.appender.OGCSERVICES.databasePassword=[pwd]

Example:  

log4j.appender.OGCSERVICES.jdbcURL=jdbc:postgresql://localhost:5432/testdb
log4j.appender.OGCSERVICES.databaseUser=postgres
log4j.appender.OGCSERVICES.databasePassword=postgres


Build with test
---------------

$ mvn install

Generating ogcservstatistics-1.0-SNAPSHOT.jar
---------------------------------------------

To generate the module ogcservstatistics-1.0-SNAPSHOT.jar execute 

$ mvn package

You can find the result in 
[the project-dir]/prototype/ogcservstatistics/target/

Debugging
---------
The following Java VM paramenters could be useful.

* Enable assertions: -ea 
* Print the loaded values: -Dlog4j.debug














 